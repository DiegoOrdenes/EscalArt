{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link type="text/css" rel="stylesheet" href="{% static 'EscalArt/css/Menu-Fotter.css' %}">
    <link type="text/css" rel="stylesheet" href="{% static 'EscalArt/css/chats.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@700&family=Roboto+Condensed:wght@300;400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />

    <!--Iconos-->
    <script src="https://kit.fontawesome.com/943e4f11a2.js" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

</head>

<body>
    <!--Header-->
    {% include 'escalArt/includes/menu.html' %}

    <div class="scrol"></div>
    What chat room would you like to enter?<br>




    <!--Chat nuevo-->
    <section class="body-chat">
        <div class="seccion-titulo">
            <h3>
                <i class="fas fa-comments"></i> Mensajes ...
            </h3>
        </div>
        <div class="seccion-usuarios">
            <div class="seccion-buscar">
                <div class="input-buscar">
                    <input type="search" placeholder="Buscar usuario">
                    <i class="fas fa-search"></i>
                </div>
            </div>
            <div class="seccion-lista-usuarios">
                {% for s in sol %}
                <div class="usuario" onclick="chat('{{s.idSolicitud}}');" id="{{s.idSolicitud}}-submit">
                    <!--  -->

                    <!--  -->
                    {% if user.username == s.usernameArtista or user == s.idCliente %}
                    <input id="{{s.idSolicitud}}-input" type="text" size="100" value="{{s.usernameArtista}}{{s.idCliente}}" hidden><br>

                    <div class="avatar">
                        <img src="{% static 'EscalArt/img/perfil.jpg' %}" alt="img">
                        <span class="estado-usuario enlinea"></span>
                    </div>
                    <div class="cuerpo">

                        {% if user == s.idCliente %}
                        <span><input style="background-color:transparent; border:none;box-shadow:none;" onclick="chat('{{s.idSolicitud}}');" id="{{s.idSolicitud}}-submit"  type="button" value="{{s.usernameArtista}}"></span>

                        <span class="username-block"> @{{s.usernameArtista}}</span>
                        <!--  -->
                        {% endif %}
                        <!--  -->
                        {% if user.username == s.usernameArtista %}
                        <span><input style="background-color:transparent; border:none;box-shadow:none;" onclick="chat('{{s.idSolicitud}}');" id="{{s.idSolicitud}}-submit"  type="button" value="{{s.idCliente.username}}"></span>

                        <span class="username-block"> @{{s.idCliente.username}}</span>
                        <!--  -->
                        {% endif %}


                        <span>detalles de mensaje</span>
                    </div>
                    <span class="notificacion">
                        3
                    </span>

                    <!--  -->
                    {% endif %}



                </div>
                <!--  -->
                {% endfor %}
            </div>
        </div>
        <div class="seccion-chat">
            <div class="usuario-seleccionado">
                <div class="avatar">
                    <img src="{% static 'EscalArt/img/perfil.jpg' %}" alt="img">
                </div>
                <div class="cuerpo">
                    <span>Nombre de usuario</span>
                    <span>Activo - Escribiendo...</span>
                </div>
                <div class="opciones">
                    <ul>
                        <li>
                            <button type="button"><i class="fas fa-video"></i></button>
                        </li>
                        <li>
                            <button type="button"><i class="fas fa-phone-alt"></i></button>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="panel-chat">
                <div class="mensaje">
                    <div class="avatar">
                        <img src="{% static 'EscalArt/img/perfil.jpg' %}" alt="img">
                    </div>
                    <div class="cuerpo">
                        <div class="texto">
                            Lorem ipsum dolor sit, amet consectetur adipisicing, elit. Dolor eligendi voluptatum dolore voluptas iure.
                            <span class="tiempo">
                                <i class="far fa-clock"></i>
                                Hace 5 min
                            </span>
                        </div>
                        <ul class="opciones-msj">
                            <li>
                                <button type="button">
                                    <i class="fas fa-times"></i>
                                </button>
                            </li>
                            <li>
                                <button type="button">
                                    <i class="fas fa-share-square"></i>
                                </button>
                            </li>
                        </ul>
                    </div>
                </div>
                <!-- derecha -->
                <div class="mensaje left">
                    <div class="cuerpo">
                        <div class="texto">
                            Lorem ipsum dolor sit, amet consectetur adipisicing, elit. Dolor eligendi voluptatum dolore voluptas iure.
                            <span class="tiempo">
                                <i class="far fa-clock"></i>
                                Hace 6 min
                            </span>
                        </div>
                        <ul class="opciones-msj">
                            <li>
                                <button type="button">
                                    <i class="fas fa-times"></i>
                                </button>
                            </li>
                            <li>
                                <button type="button">
                                    <i class="fas fa-share-square"></i>
                                </button>
                            </li>
                        </ul>
                    </div>
                    <div class="avatar">
                        <img src="{% static 'EscalArt/img/perfil.jpg' %}" alt="img">
                    </div>
                </div>
            </div>
            <div class="panel-escritura">
                <form class="textarea">
                    <div class="opcines">
                        <button type="button">
                            <i class="fas fa-file"></i>
                            <label for="file"></label>
                            <input type="file" id="file">
                        </button>
                        <button type="button">
                            <i class="far fa-image"></i>
                            <label for="img"></label>
                            <input type="file" id="img">
                        </button>
                    </div>
                    <textarea placeholder="Escribir mensaje"></textarea>
                    <button type="button" class="enviar">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </form>
            </div>
        </div>
    </section>

    <!--Pie de la pagina-->
    {% include 'escalArt/includes/footer.html' %}

    <script>
        function chat(solicitud) {
            document.querySelector(`#${solicitud}-input`).focus();
            document.querySelector(`#${solicitud}-input`).onkeyup = function(e) {
                if (e.keyCode === 13) { // enter, return
                    document.querySelector(`#${solicitud}-submit`).click();
                }
            };

            document.querySelector(`#${solicitud}-submit`).onclick = function(e) {
                var roomName = document.querySelector(`#${solicitud}-input`).value;
                window.location.pathname = '/chat/' + roomName + '/';
            };
        }
    </script>
    <script type="text/javascript" src="{% static 'EscalArt/js/menu.js' %}"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>


</html>